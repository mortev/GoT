<section id="widget-grid" class="">

	<div class="row">

		<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">

			<div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false">

				<header>
					<span class="widget-icon"> <i class="fa fa-map-marker"></i> </span>
					<h2>Atlas </h2>
				</header>
				
                <div>
					<div class="widget-body no-padding" style="position:relative">

                        <img src="./img/got/atlas.jpg" alt="Game of Thrones Atlas" usemap="#got-map" class="got-map" style="z-index:0;opacity:0.8;max-width:100%"/>

                        <!--<img src="king.png" style="position:absolute;width:25px;height:25px;top:10px;left:10px;z-index:1000" class="king"/>-->

                        <!--<div style="position:absolute;background-color:black;width:5px;height:5px;top:10px;left:10px" />

                        <div style="position:absolute;background-color:black;width:50px;height:50px;top:30px;left:30px" />-->

                        <map name="got-map">
                            <area data-key="1" shape="poly" coords="530,154,718,155,722,165,725,185,732,197,740,202,745,214,748,224,748,233,753,244,753,259,755,272,756,283,737,279,714,260,705,262,688,269,673,278,668,287,668,292,649,282,625,273,614,275,610,284,597,288,585,288,574,294,563,299,551,303,539,313,529,324,516,339,506,340,476,350,461,349,426,344,427,335,437,320,440,321,442,306,438,299,442,287,449,284,452,274,451,268,448,256,438,246,445,243,447,238,461,232,472,227,476,218,484,217,492,216,498,214,501,209,500,202,522,172,530,163,530,155" href="#" alt="Castle Black" />
                            <area data-key="2" shape="poly" coords="668,290,672,277,686,268,706,260,716,262,729,273,746,280,764,280,772,277,781,284,790,286,796,283,804,288,817,290,824,297,833,299,836,306,852,308,861,296,890,290,896,294,901,303,902,314,907,322,910,332,911,337,909,349,908,357,902,373,896,376,893,391,888,396,889,406,886,422,878,411,878,405,861,400,856,387,846,376,842,390,846,407,844,416,837,428,838,439,832,458,813,457,808,464,808,477,800,480,792,466,784,466,763,458,761,440,764,428,756,426,754,390,740,377,736,363,712,352,667,293" href="#" alt="Karhold" />
                            <area data-key="3" shape="poly" coords="330,372,332,364,336,356,331,350,326,343,324,326,332,345,338,346,346,358,350,364,366,355,376,362,389,358,391,350,396,348,404,355,416,349,416,343,424,346,429,340,444,347,470,349,479,351,509,338,518,340,547,305,564,300,584,287,601,289,618,275,636,276,658,286,694,328,715,354,735,362,742,380,752,389,756,405,756,424,764,428,765,454,758,468,763,478,755,481,766,496,753,493,736,497,713,475,701,474,678,451,671,451,665,454,604,520,590,522,580,530,554,576,547,605,554,624,555,632,542,640,526,661,525,676,530,695,544,714,534,722,506,718,498,719,477,728,396,740,395,729,369,721,360,721,352,726,346,730,338,729,324,736,329,709,341,702,346,680,374,636,389,575,388,567,392,562,372,550,368,540,352,526,338,528,314,516,306,484,304,469,282,458,274,450,223,468,218,448,197,442,216,434,216,428,226,425,219,388,227,374,216,355,182,342,187,338,208,336,214,331,232,346,241,363,247,378,256,395,268,404,283,408,310,400,320,386,330,374,331,370" href="#" alt="Winterfell" />
                            <area data-key="4" shape="poly" coords="226,466,276,450,295,462,304,470,307,485,313,498,315,513,328,526,350,526,369,541,373,552,389,561,388,569,390,579,377,626,347,674,342,702,330,710,322,708,311,718,306,726,298,738,280,737,273,727,277,715,274,696,269,693,265,708,258,720,259,731,244,730,234,744,205,746,200,732,186,728,183,713,168,708,168,703,170,682,156,666,154,638,158,624,157,602,154,602,144,618,140,626,128,626,114,644,113,633,120,616,109,615,108,592,108,583,116,578,115,569,117,552,126,544,129,530,143,506,158,507,171,514,180,517,190,522,204,514,204,502,200,497,206,494,208,476,195,466,210,472,220,472,227,466" href="#" alt="The Stony Shore"/>
                            <area data-key="5" shape="poly" coords="544,713,526,688,523,663,530,650,558,628,544,605,551,581,586,525,606,518,670,451,679,451,701,474,712,474,729,495,756,494,758,508,764,518,782,528,786,543,768,544,766,552,732,544,717,550,714,562,692,565,688,576,683,590,681,600,682,613,658,621,660,632,664,644,664,658,679,668,682,674,696,679,700,695,708,696,732,693,732,712,726,724,720,738,716,751,706,758,684,760,677,743,664,728,651,720,622,722,609,732,604,739,601,712,588,693,586,683,579,680,574,692,570,700,558,708,544,712" href="#" alt="White Harbor" />
                            <area data-key="6" shape="poly" coords="766,550,730,546,715,550,714,563,694,568,686,575,682,590,678,592,684,608,660,627,662,642,663,659,676,671,688,677,700,690,710,696,730,694,735,672,742,666,744,655,741,640,748,636,762,644,776,650,788,650,799,648,804,658,814,656,826,666,836,662,849,663,837,657,834,652,825,651,819,645,808,643,805,626,812,621,803,606,809,604,806,597,794,595,792,578,785,578,786,572,776,572,766,550" href="#" alt="Widow's Watch" />

                            <area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />
                            <area data-key="round-2" shape="poly" coords="1084,1965,1083,1920,1086,1916,1093,1913,1178,1913,1184,1916,1190,1922,1190,1961,1188,1968,1180,1970,1090,1972" href="#" alt="Round 2" />
                            <area data-key="round-3" shape="poly" coords="1084,1906,1084,1858,1088,1854,1183,1853,1188,1858,1190,1906,1182,1910,1092,1911,1086,1906" href="#" alt="Round 3" />
                            <!--<area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />
                            <area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />
                            <area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />
                            <area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />
                            <area data-key="round-1" shape="poly" coords="1182,2030,1091,2030,1082,2025,1083,1979,1090,1975,1180,1974,1186,1976,1188,1981,1190,2024,1187,2028,1184,2030" href="#" alt="Round 1" />-->


                            
                        </map>
				    </div>
			    </div>
            </div>
		</article>
	</div>
</section>

<script type="text/javascript">

	pageSetUp();
	
	/* remove previous elems */
	if($('.DTTT_dropdown.dropdown-menu').length){
		$('.DTTT_dropdown.dropdown-menu').remove();
	}

	$.getJSON(webApiUrl + "/GetRegions", function (json) {

	    $.each(json, function (i, key) {
	        //$('area[data-key=' + key.RegionId + ']').mapster('set', true, { fillColor: 'FF6600', fillOpacity: 0.4 });
	    });
	});

	$(document).ready(function () {

	    var map = $('.got-map'),
            king = $('.king');

	    map.mapster({
	        mapKey: 'data-key',
	        fillOpacity: 0.4,
	        fillColor: 'FFFFFF',
	        showToolTip: true,
	        staticState: true,
	        singleSelect: true,
	        isSelectable: true,
	        toolTipClose: ['area-mouseout', 'area-click'],
	        onConfigured: function() {
	            //map.siblings().css('z-index', 0);
	            //map.css('z-index', 10);

	        },
	        areas: [{
	            key: "1",
	            toolTip: "Castle Black",
	        },
            {
                key: "2",
                toolTip: "Karhold",
            },
            {
                key: "3",
                toolTip: "Winterfell",
            },
            {
                key: "round-1",
                selected: false,
                fillOpacity: 0.5,
                fillColor: 'DDDDDD'
            },
            {
                key: "round-2",
                selected: false,
                fillOpacity: 0.2,
            },
            {
                key: "round-3",
                selected: false,
                fillOpacity: 0.2,
            },
            {
                key: "round-4",
                selected: false,
                fillOpacity: 0.2,
            }]
	    });


	    //king.css('z-index', 5).draggable({
	    //    drag: function () {
	    //        $(this).css('z-index', 5)
	    //    }
	    //});
	    //map.droppable({
	    //    drop: function (e, ui) {
	    //        var landing = map.mapster('highlight');
	    //        alert(landing);
	    //        $(ui.draggable).css('z-index', 20);
	    //        if (landing == 'Mars') {
	    //            alert("Thanks for bringing me home!!!");
	    //        } else if (landing) {
	    //            alert("I don't live on " + landing);

	    //        }

	    //    }
	    //});

	});

	
	// pagefunction	
	var pagefunction = function() {

	};





	// load related plugins
	
	loadScript("js/plugin/datatables/jquery.dataTables.min.js", function(){
		loadScript("js/plugin/datatables/dataTables.colVis.min.js", function(){
			loadScript("js/plugin/datatables/dataTables.tableTools.min.js", function(){
				loadScript("js/plugin/datatables/dataTables.bootstrap.min.js", pagefunction);
			});
		});
	});


</script>
